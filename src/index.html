<!doctype html>
<html lang="en">

<head>
      <meta charset="utf-8">
      <title>TecniStore</title>
      <base href="/">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="icon" type="image/x-icon" href="favicon.ico">
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">


      <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

      <script src="https://kit.fontawesome.com/d4e79f1008.js" crossorigin="anonymous"></script>

</head>

<body class="mat-typography">
      <app-root></app-root>

      <script src="assets/js/bootstrap.bundle.min.js"></script>
      <link rel="stylesheet"
            href="//cdn.jsdelivr.net/gh/dmhendricks/bootstrap-grid-css@4.1.3/dist/css/bootstrap-grid.min.css" />


      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


      <body class="mat-typography">
            <app-root></app-root>

            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
                  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
                  crossorigin="anonymous"></script>

      </body>

      <body>

            <canvas id="myChart" style="position: relative; height: 50vh; width: 80vw;"></canvas>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

            <script>
                  var ctx = document.getElementById('myChart')
                  var myChart = new Chart(ctx, {
                        type: 'bar',
                        //type:'doughnut',
                        //type:'polarArea',

                        data: {
                              datasets: [{
                                    label: 'Stock de Productos',
                                    backgroundColor: [
                                          'rgba(255, 99, 132, 0.2)',
                                          'rgba(54, 162, 235, 0.2)',
                                          'rgba(255, 206, 86, 0.2)',
                                          'rgba(75, 192, 192, 0.2)',
                                          'rgba(153, 102, 255, 0.2)',
                                          'rgba(255, 159, 64, 0.2)'
                                    ],
                                    borderColor: [
                                          'rgba(255, 99, 132, 1)',
                                          'rgba(54, 162, 235, 1)',
                                          'rgba(255, 206, 86, 1)',
                                          'rgba(75, 192, 192, 1)',
                                          'rgba(153, 102, 255, 1)',
                                          'rgba(255, 159, 64, 1)'
                                    ],
                                    borderWidth: 1
                              }]
                        },
                        options: {
                              scales: {
                                    y: {
                                          beginAtZero: true
                                    }
                              }
                        }
                  })

                  let url = 'https://tecnistoreaapi.rj.r.appspot.com:443/vistaproductos'
                  fetch(url)
                        .then(response => response.json())
                        .then(datos => mostrar(datos))
                        .catch(error => console.log(error))


                  const mostrar = (articulos) => {
                        articulos.forEach(element => {
                              myChart.data['labels'].push(element.nombre)
                              myChart.data['datasets'][0].data.push(element.stock)
                              myChart.update()
                        });
                        console.log(myChart.data)
                  } 
            </script>

      </body>

</html>